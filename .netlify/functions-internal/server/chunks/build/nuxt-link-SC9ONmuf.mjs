import{defineComponent as e,shallowRef as t,h as a,resolveComponent as r,computed as i}from"vue";import{C as l,i as u,j as n,D as o,E as s}from"../nitro/nitro.mjs";import{a as v,b as c,r as p,c as d,n as f,d as h}from"./server.mjs";function defineNuxtLink(o){const s=o.componentName||"NuxtLink";function isHashLinkWithoutHashMode(e){return"string"==typeof e&&e.startsWith("#")}function useNuxtLink(e){const t=v(),a=d(),l=i(()=>!!e.target&&"_self"!==e.target),s=i(()=>{const t=e.to||e.href||"";return"string"==typeof t&&u(t,{acceptRelative:!0})}),c=r("RouterLink"),h=c&&"string"!=typeof c?c.useLink:void 0,g=i(()=>{if(e.external)return!0;const t=e.to||e.href||"";return"object"!=typeof t&&(""===t||s.value)}),y=i(()=>{const a=e.to||e.href||"";return g.value?a:function(e,t,a){const r=a??o.trailingSlash;if(!e||"append"!==r&&"remove"!==r)return e;if("string"==typeof e)return applyTrailingSlashBehavior(e,r);const i="path"in e&&void 0!==e.path?e.path:t(e).path;return{...e,name:void 0,path:applyTrailingSlashBehavior(i,r)}}(a,t.resolve,e.trailingSlash)}),m=g.value?void 0:h?.({...e,to:y}),x=i(()=>{const r=e.trailingSlash??o.trailingSlash;if(!y.value||s.value||isHashLinkWithoutHashMode(y.value))return y.value;if(g.value){const e="object"==typeof y.value&&"path"in y.value?p(y.value):y.value;return applyTrailingSlashBehavior("object"==typeof e?t.resolve(e).href:e,r)}return"object"==typeof y.value?t.resolve(y.value)?.href??null:applyTrailingSlashBehavior(n(a.app.baseURL,y.value),r)});return{to:y,hasTarget:l,isAbsoluteUrl:s,isExternal:g,href:x,isActive:m?.isActive??i(()=>y.value===t.currentRoute.value.path),isExactActive:m?.isExactActive??i(()=>y.value===t.currentRoute.value.path),route:m?.route??i(()=>t.resolve(y.value)),async navigate(t){await f(x.value,{replace:e.replace,external:g.value||l.value})}}}return e({name:s,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},prefetchOn:{type:[String,Object],default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1},trailingSlash:{type:String,default:void 0,required:!1}},useLink:useNuxtLink,setup(e,{slots:i}){const u=v(),{to:n,href:s,navigate:p,isExternal:d,hasTarget:f,isAbsoluteUrl:h}=useNuxtLink(e);t(!1);async function prefetch(e=c()){}return()=>{if(!d.value&&!f.value&&!isHashLinkWithoutHashMode(n.value)){const t={ref:undefined,to:n.value,activeClass:e.activeClass||o.activeClass,exactActiveClass:e.exactActiveClass||o.exactActiveClass,replace:e.replace,ariaCurrentValue:e.ariaCurrentValue,custom:e.custom};return e.custom||(t.rel=e.rel||void 0),a(r("RouterLink"),t,i.default)}const t=e.target||null,v=((...e)=>e.find(e=>void 0!==e))(e.noRel?"":e.rel,o.externalRelAttribute,h.value||f.value?"noopener noreferrer":"")||null;return e.custom?i.default?i.default({href:s.value,navigate:p,prefetch:prefetch,get route(){if(!s.value)return;const e=new URL(s.value,"http://localhost");return{path:e.pathname,fullPath:e.pathname,get query(){return l(e.search)},hash:e.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:s.value}},rel:v,target:t,isExternal:d.value||f.value,isActive:!1,isExactActive:!1}):null:a("a",{ref:undefined,href:s.value||null,rel:v,target:t,onClick:t=>{if(!d.value&&!f.value)return t.preventDefault(),e.replace?u.replace(s.value):u.push(s.value)}},i.default?.())}}})}const g=defineNuxtLink(h);function applyTrailingSlashBehavior(e,t){const a="append"===t?o:s;return u(e)&&!e.startsWith("http")?e:a(e,!0)}export{g as _};
//# sourceMappingURL=nuxt-link-SC9ONmuf.mjs.map
